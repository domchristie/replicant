(function(){this.Replicant={}}).call(this),function(){Replicant.extendObject=function(t,e){var n,i;for(n in e)i=e[n],t[n]=i;return t}}.call(this),function(){var t,e;Replicant.registerElement=function(t,n){var i,r,o,a,l,c;return null==n&&(n={}),t=t.toLowerCase(),a=Replicant.extendObject({},n),r=null!=(c=a.defaultCSS)?c:"%t { display: block }",delete a.defaultCSS,e(r,t),o=Object.getPrototypeOf(document.createElement("div")),o.__super__=o,l=Object.create(o,a),i=document.registerElement(t,{prototype:l}),Object.defineProperty(l,"constructor",{value:i}),i},e=function(e,n){var i;return i=t(n),i.textContent=e.replace(/%t/g,n)},t=function(t){var e;return e=document.createElement("style"),e.setAttribute("type","text/css"),e.setAttribute("data-tag-name",t.toLowerCase()),document.head.insertBefore(e,document.head.firstChild),e}}.call(this),function(){Replicant.instrumentMethod=function(t,e,n){var i;return i=t[e],t[e]=function(){var t;return t=i.apply(this,arguments),n(),t}}}.call(this),function(){Replicant.triggerEvent=function(t,e,n){var i;return null==n&&(n={}),i=document.createEvent("Events"),i.initEvent(e,!0,!1),Replicant.extendObject(i,n),t.dispatchEvent(i)}}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};t=Replicant.instrumentMethod,e=Replicant.memoizeFunction,n=Replicant.triggerEvent,Replicant.FrameController=function(){function e(t){this.element=t,this.afterPopState=i(this.afterPopState,this),this.afterReplaceState=i(this.afterReplaceState,this),this.afterPushState=i(this.afterPushState,this),this.iframeElementLoaded=i(this.iframeElementLoaded,this)}var r;return e.prototype.elementAttached=function(){return this.initialize()?this.attachIframeElement():void 0},e.prototype.getIframeElement=function(){var t;return null!=this.iframeElement?this.iframeElement:this.iframeElement=(t=document.createElement("iframe"),t.addEventListener("load",this.iframeElementLoaded,!0),t.src="about:blank",t)},e.prototype.isLoading=function(){return!this.loaded},e.prototype.initialize=function(){return this.initialized?void 0:(this.triggerEvent("replicant-initialize"),this.initialized=!0)},e.prototype.completeLoad=function(){return this.triggerEvent("replicant-load")},e.prototype.completeNavigationWithAction=function(t){return this.triggerEvent("replicant-navigate",{action:t})},e.prototype.attachIframeElement=function(){return this.element.insertBefore(this.getIframeElement(),this.element.firstChild)},e.prototype.iframeElementLoaded=function(){return r(function(t){return function(){return t.instrumentHistoryMethods(),t.registerEventListeners(),t.completeNavigationWithAction("load"),t.completeLoad()}}(this))},e.prototype.instrumentHistoryMethods=function(){var e;return e=this.element.window.history.constructor.prototype,t(e,"pushState",this.afterPushState),t(e,"replaceState",this.afterReplaceState)},e.prototype.registerEventListeners=function(t){var e;return e=this.element.window.window,e.addEventListener("popstate",this.afterPopState,!0)},e.prototype.afterPushState=function(){return this.completeNavigationWithAction("push")},e.prototype.afterReplaceState=function(){return this.completeNavigationWithAction("replace")},e.prototype.afterPopState=function(){return this.completeNavigationWithAction("pop")},e.prototype.triggerEvent=function(t,e){return n(this.element,t,e)},r=function(t){return setTimeout(t,1)},e}()}.call(this),function(){Replicant.registerElement("replicant-frame",{defaultCSS:"%t {\n  position: relative;\n  display: block;\n  width: 320px;\n  height: 240px;\n  border: 1px solid windowframe;\n}\n\n%t > iframe {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  border: none;\n}",createdCallback:{value:function(){return this.controller=new Replicant.FrameController(this)}},attachedCallback:{value:function(){return this.controller.elementAttached()}},iframeElement:{get:function(){return this.controller.getIframeElement()}},window:{get:function(){var t;return null!=(t=this.iframeElement)?t.contentWindow:void 0}},document:{get:function(){var t;return null!=(t=this.window)?t.document:void 0}},location:{get:function(){var t;return null!=(t=this.window)?t.location:void 0},set:function(t){return this.iframeElement.src=t.toString()}},title:{get:function(){var t;return null!=(t=this.document)?t.title:void 0}},goBack:{value:function(){var t;return null!=(t=this.window)?t.history.back():void 0}},goForward:{value:function(){var t;return null!=(t=this.window)?t.history.forward():void 0}}})}.call(this);